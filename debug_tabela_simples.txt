# COMANDO SIMPLES PARA DEBUG NO HEROKU

heroku run python3 -c "
from app import create_app
from models import db

app = create_app()
with app.app_context():
    print('üîç DEBUG R√ÅPIDO - TABELAS DE ATIVIDADES')
    
    # 1. Verificar se existe tabela atividades_os
    try:
        result = db.engine.execute('SELECT COUNT(*) FROM atividades_os')
        count = result.fetchone()[0]
        print(f'‚úÖ Tabela atividades_os existe: {count} registros')
    except Exception as e:
        print(f'‚ùå Tabela atividades_os: {e}')
    
    # 2. Verificar outras poss√≠veis tabelas
    for nome in ['atividade_os', 'os_atividades', 'atividades', 'atividade']:
        try:
            result = db.engine.execute(f'SELECT COUNT(*) FROM {nome}')
            count = result.fetchone()[0]
            print(f'‚úÖ Tabela {nome} existe: {count} registros')
        except:
            print(f'‚ùå Tabela {nome} n√£o existe')
    
    # 3. Verificar modelo Python
    try:
        from models.atividade_os import AtividadeOS
        print(f'‚úÖ Modelo AtividadeOS: tabela = {AtividadeOS.__tablename__}')
        
        # Tentar buscar atividades da OS 862
        atividades = AtividadeOS.query.filter_by(os_id=862).all()
        print(f'üìä OS 862 via modelo: {len(atividades)} atividades')
        
        # Se n√£o encontrou, tentar buscar qualquer atividade
        primeira_atividade = AtividadeOS.query.first()
        if primeira_atividade:
            print(f'‚úÖ Primeira atividade encontrada: OS {primeira_atividade.os_id} - {primeira_atividade.descricao}')
        else:
            print('‚ùå Nenhuma atividade encontrada via modelo')
            
    except Exception as e:
        print(f'‚ùå Erro no modelo: {e}')
    
    # 4. Verificar se OS 862 existe
    try:
        result = db.engine.execute('SELECT id, descricao, pmp_id FROM ordens_servico WHERE id = 862')
        os_data = result.fetchone()
        if os_data:
            print(f'‚úÖ OS 862 existe: {os_data[1]} (PMP: {os_data[2]})')
        else:
            print('‚ùå OS 862 n√£o existe')
    except Exception as e:
        print(f'‚ùå Erro ao buscar OS: {e}')
" --app ativusai-af6f1462097d
